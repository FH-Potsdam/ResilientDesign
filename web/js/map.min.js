function showMarkers(e){removeOldMarkers();console.log("Show markers for time: "+currentTime);e=e<10?"0"+e:e;for(var t=0;t<markersData["STD"+e].length;t++){var n=markersData["STD"+e][t];if(n.geometry.type=="Point"){var r=new L.marker([n.geometry.coordinates[1],n.geometry.coordinates[0]],{icon:getMarkerIcon(n.properties.markerIcon)});r.addTo(map);mapMarkersArray.push(r);var i=new L.Popup;i.setContent("<h4>"+n.properties.markerTitle+"</h4><p>"+n.properties.markerText+"</p>");r.bindPopup(i)}}}function getMarkerIcon(e){var t=L.icon({iconUrl:"images/icons/"+e+".png",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-80]});return t}function removeOldMarkers(){if(!mapMarkersArray)return;for(i=0;i<mapMarkersArray.length;i++)map.removeLayer(mapMarkersArray[i])}var map,mapMarkersArray,tempelhof={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[13.376820087432861,52.461540053532474],[13.375425338745117,52.455551741825815],[13.376605510711668,52.45424414186043],[13.379781246185303,52.45536868016808],[13.380725383758545,52.45492409868811],[13.384137153625488,52.45462334984769],[13.383944034576416,52.45576095421711],[13.386840820312498,52.456440887624154],[13.38735580444336,52.45882057187122],[13.387699127197264,52.45887287117959],[13.387892246246338,52.459042843502665],[13.387763500213623,52.45929126340994],[13.387506008148193,52.45939586084633],[13.387763500213623,52.460559490566915],[13.381733894348145,52.46112168267169],[13.381626605987549,52.461330868599035],[13.381218910217285,52.46142238712973],[13.380961418151854,52.4613439426865],[13.38083267211914,52.4612132016372],[13.376820087432861,52.461540053532474]]]}}]};map=L.map("map").setView([52.4548,13.3815],16);var imageUrl="map/map-150.png",imageBounds=[[52.4422,13.3699],[52.4674,13.3931]];L.imageOverlay(imageUrl,imageBounds).addTo(map);map.dragging.disable();map.touchZoom.disable();map.doubleClickZoom.disable();map.scrollWheelZoom.disable();map.tap&&map.tap.disable();var coordinates=tempelhof.features[0].geometry.coordinates[0],latLngs=[];for(i=0;i<coordinates.length;i++)latLngs.push(new L.LatLng(coordinates[i][1],coordinates[i][0]));L.mask(latLngs).addTo(map);var layerProblems,layerSolutions,markersData=[];$(document).ready(function(){$.when($.getJSON("data/RD_mapMarkersSTD0.json"),$.getJSON("data/RD_mapMarkersSTD3.json"),$.getJSON("data/RD_mapMarkersSTD6.json"),$.getJSON("data/RD_mapMarkersSTD12.json"),$.getJSON("data/RD_mapMarkersSTD24.json"),$.getJSON("data/RD_mapMarkersSTD48.json")).done(function(e,t,n,r,i,s){var o=$.parseJSON(e[2].responseText),u=$.parseJSON(t[2].responseText),a=$.parseJSON(n[2].responseText),f=$.parseJSON(r[2].responseText),l=$.parseJSON(i[2].responseText),c=$.parseJSON(s[2].responseText);console.log("Markers successfully loaded!");markersData.STD00=o.features;markersData.STD03=u.features;markersData.STD06=a.features;markersData.STD12=f.features;markersData.STD24=l.features;markersData.STD48=c.features;mapMarkersArray=new Array;showMarkers(currentTime)})});