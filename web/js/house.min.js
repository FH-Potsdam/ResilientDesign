////////////////////////
// House View Scripts
////////////////////////
// SVG Vars
function initFloorNavigation(){$floorNavItems=$("#svg-nav > a");goToFloor(currentFloor);$floorNavItems.click(function(e){var t=e.target.hash;oldFloor=currentFloor;currentFloor=t.replace("#","");updateContent(currentTime);goToFloor(currentFloor);e.preventDefault();return!1})}function goToFloor(e){var t=$floorNavItems.filter(".active"),n=$floorNavItems.filter('a[href$="#'+e+'"]');t.removeClass("active");$houseSlider.attr("class",e+"-active");var r=!1;n.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){if(r)return!1;n.addClass("active");$(this).off(e);r=!0})}function showPopup(e,t){var n=$(e.node),r=n[0].getBBox(),i=t.x-185,s=t.y-50;$popupPane.html("");$popupPane.append('<div class="leaflet-popup leaflet-zoom-animated" style="opacity: 1; transform: translate3d('+i+"px, "+s+'px, 0px); bottom: 27px; left: -82px;"><a class="leaflet-popup-close-button" href="#close">Ã—</a><div class="leaflet-popup-content-wrapper"><div class="leaflet-popup-content" style="width: 133px;"><h4>House</h4><p>This is our house!</p></div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div></div>')}function activateGraphic(e){$(".active-graphic").removeAttr("class");var t=$(e.node);t.attr("class","active-graphic")}function animateTest(){var e=new Snap.Matrix;e.scale(1.2,1.2);e.translate(30,-250);s.select("g").animate({transform:e.toTransformString()},1e3)}var svg,g,boy1,boy2,girl,bottle,lamp,cabinetOp,cabinetCl,counterOp,counterCl,laptop,wc,sink,$houseView,$houseSlider,$floorNavItems,$popupPane,currentFloor="floor-3",oldFloor="";window.onload=function(){$houseView=$("#house-view");$houseSlider=$("#house-slider");$popupPane=$('<div class="leaflet-popup-pane"></div>');$houseSlider.append($popupPane);initFloorNavigation();svg=Snap("#house");Snap.load("images/house/optimised.svg",function(e){g=e.select("g"),boy1=e.select("#Boy_x5F_1"),boy2=e.select("#Boy_x5F_2"),girl=e.select("#Girl"),bottle=e.select("#Bottle"),lamp=e.select("#Lamp"),cabinetOp=e.select("#Cabinet_x5F_Open"),cabinetCl=e.select("#Cabinet_x5F_Closed"),counterOp=e.select("#Counter_x5F_Open"),counterCl=e.select("#Counter_x5F_Closed"),laptop=e.select("#Laptop"),wc=e.select("#WC"),sink=e.select("#Sink");var t=new Snap.Matrix;t.scale(1.2,1.2);t.translate(30,50);g.attr({transform:t});boy1.click(onElementClicked);boy2.click(onElementClicked);girl.click(onElementClicked);bottle.click(onElementClicked);lamp.click(onElementClicked);cabinetOp.click(onElementClicked);counterOp.click(onElementClicked);laptop.click(onElementClicked);wc.click(onElementClicked);sink.click(onElementClicked);$(document).click(function(e){$(".active-graphic").removeAttr("class");var t=$(".leaflet-popup-pane").remove()});svg.append(g)})};var onElementClicked=function(e){activateGraphic(this);showPopup(this,e);e.stopPropagation()};