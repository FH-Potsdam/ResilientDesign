describe("Path methods",function(){it("Snap.path.getTotalLength",function(){expect(+Snap.path.getTotalLength("M0,0 100,0").toFixed(2)).to.be(100)});it("Snap.path.getPointAtLength",function(){expect(Snap.path.getPointAtLength("M0,0 100,0",50)).to.eql({x:50,y:0,m:{x:25,y:0},n:{x:75,y:0},start:{x:0,y:0},end:{x:100,y:0},alpha:180})});it("Snap.path.getSubpath",function(){expect(Snap.path.getSubpath("M0,0 100,0",10,90)).to.be("M9.995,0C29.153,0,70.839,0,90,0");expect(Snap.path.getSubpath("M0,0 100,0",0,90)).to.be("M0,0C0,0,64.674,0,90,0");expect(Snap.path.getSubpath("M0,0 100,0",10,120)).to.be("M10,0C35.326,0,100,0,100,0")});it("Snap.path.findDotsAtSegment",function(){expect(Snap.path.findDotsAtSegment(0,0,0,0,100,0,100,0,.5)).to.eql({x:50,y:0,m:{x:25,y:0},n:{x:75,y:0},start:{x:0,y:0},end:{x:100,y:0},alpha:180})});it("Snap.path.bezierBBox - params",function(){var e=Snap.path.bezierBBox(10,10,10,20,110,0,110,10);expect(e.cx).to.be(60);expect(e.cy).to.be(10);expect(e.x).to.be(10);expect(e.w).to.be(100);expect(e.width).to.be(100);expect(e.x2).to.be(110)});it("Snap.path.bezierBBox - array",function(){var e=Snap.path.bezierBBox([10,10,10,20,110,0,110,10]);expect(e.cx).to.be(60);expect(e.cy).to.be(10);expect(e.x).to.be(10);expect(e.w).to.be(100);expect(e.width).to.be(100);expect(e.x2).to.be(110)});it("Snap.path.getBBox",function(){var e=Snap.path.getBBox("M10,20h30v40h-30z");expect(e.x).to.eql(10);expect(e.y).to.eql(20);expect(e.width).to.eql(30);expect(e.height).to.eql(40);expect(e.x2).to.eql(40);expect(e.y2).to.eql(60)});it("Snap.path.isPointInsideBBox",function(){expect(Snap.path.isPointInsideBBox({x:0,y:0,width:10,height:10},5,5)).to.be(!0);expect(Snap.path.isPointInsideBBox({x:0,y:0,width:10,height:10},10,5)).to.be(!0);expect(Snap.path.isPointInsideBBox({x:0,y:0,width:10,height:10},10,10)).to.be(!0)});it("Snap.path.isBBoxIntersect",function(){expect(Snap.path.isBBoxIntersect({x:0,y:0,width:10,height:10},{x:5,y:5,width:15,height:15})).to.be(!0);expect(Snap.path.isBBoxIntersect({x:0,y:0,width:10,height:10},{x:5,y:5,width:7,height:7})).to.be(!0);expect(Snap.path.isBBoxIntersect({x:0,y:0,width:10,height:10},{x:15,y:15,width:10,height:10})).to.be(!1)});it("Snap.path.toAbsolute",function(){var e="M 10 10h 40v 30h -40l 0 -30m 0 40l 30 0l 0 40l -30 0m 0 10c 20 20 40 20 40 0m -40 40c 10 -25 20 -25 30 0s 10 25 20 0m 20 -130q 30 30 60 0m -60 40q 10 20 20 0t 20 0m -40 30a 10 10 0 0 0 40 0",t=Snap.path.toAbsolute(e),n=0,r=function(e){expect(t[n++]).to.eql(e)};r(["M",10,10]);r(["H",50]);r(["V",40]);r(["H",10]);r(["L",10,10]);r(["M",10,50]);r(["L",40,50]);r(["L",40,90]);r(["L",10,90]);r(["M",10,100]);r(["C",30,120,50,120,50,100]);r(["M",10,140]);r(["C",20,115,30,115,40,140]);r(["S",50,165,60,140]);r(["M",80,10]);r(["Q",110,40,140,10]);r(["M",80,50]);r(["Q",90,70,100,50]);r(["T",120,50]);r(["M",80,80]);r(["A",10,10,0,0,0,120,80])});it("Snap.path.toRelative",function(){var e="M10 10 H 50 V 40 H 10 L 10 10M10 50 L 40 50 L 40 90 L 10 90M10 100 C 30 120, 50 120, 50 100M10 140 C 20 115, 30, 115, 40 140 S 50 165, 60 140M80 10 Q 110 40, 140 10M80 50 Q 90 70, 100 50 T 120 50M80 80 A 10 10 0 0 0 120 80",t=Snap.path.toRelative(e),n=0,r=function(e){expect(t[n++]).to.eql(e)};r(["M",10,10]);r(["h",40]);r(["v",30]);r(["h",-40]);r(["l",0,-30]);r(["m",0,40]);r(["l",30,0]);r(["l",0,40]);r(["l",-30,0]);r(["m",0,10]);r(["c",20,20,40,20,40,0]);r(["m",-40,40]);r(["c",10,-25,20,-25,30,0]);r(["s",10,25,20,0]);r(["m",20,-130]);r(["q",30,30,60,0]);r(["m",-60,40]);r(["q",10,20,20,0]);r(["t",20,0]);r(["m",-40,30]);r(["a",10,10,0,0,0,40,0])});it("Snap.path.toCubic",function(){var e="M10 10 H 50 V 40 H 10 L 10 10M10 50 L 40 50 L 40 90 L 10 90M10 100 C 30 120, 50 120, 50 100M10 140 C 20 115, 30, 115, 40 140 S 50 165, 60 140M80 10 Q 110 40, 140 10M80 50 Q 90 70, 100 50 T 120 50M80 80 A 10 10 0 0 0 120 80",t="M 10 10h 40v 30h -40l 0 -30m 0 40l 30 0l 0 40l -30 0m 0 10c 20 20 40 20 40 0m -40 40c 10 -25 20 -25 30 0s 10 25 20 0m 20 -130q 30 30 60 0m -60 40q 10 20 20 0t 20 0m -40 30a 10 10 0 0 0 40 0",n=Snap.path.toCubic(e),r=Snap.path.toCubic(t),i=0,s=function(e){expect(n[i]).to.eql(e);expect(r[i]).to.eql(e);i++};s(["M",10,10]);s(["C",10,10,50,10,50,10]);s(["C",50,10,50,40,50,40]);s(["C",50,40,10,40,10,40]);s(["C",10,40,10,10,10,10]);s(["M",10,50]);s(["C",10,50,40,50,40,50]);s(["C",40,50,40,90,40,90]);s(["C",40,90,10,90,10,90]);s(["M",10,100]);s(["C",30,120,50,120,50,100]);s(["M",10,140]);s(["C",20,115,30,115,40,140]);s(["C",50,165,50,165,60,140]);s(["M",80,10]);s(["C",100,29.999999999999996,120,29.999999999999996,140,10]);s(["M",80,50]);s(["C",86.66666666666666,63.33333333333333,93.33333333333333,63.33333333333333,100,50]);s(["C",106.66666666666666,36.666666666666664,113.33333333333333,36.666666666666664,120,50]);s(["M",80,80]);s(["C",80,95.39600717839002,96.66666666666667,105.01851166488379,110,97.32050807568878]);s(["C",116.18802153517007,93.74785217660714,120,87.14531179816328,120,80])});it("Snap.path.map",function(){var e="M10 10 H 50 V 40 H 10 L 10 10M10 50 L 40 50 L 40 90 L 10 90M10 100 C 30 120, 50 120, 50 100M10 140 C 20 115, 30, 115, 40 140 S 50 165, 60 140M80 10 Q 110 40, 140 10M80 50 Q 90 70, 100 50 T 120 50M80 80 A 10 10 0 0 0 120 80",t=new Snap.Matrix(1,0,0,1,1e3,0),n=Snap.path.map(e,t),r=0,i=function(e){expect(n[r++]).to.eql(e)};i(["M",1010,10]);i(["C",1010,10,1050,10,1050,10]);i(["C",1050,10,1050,40,1050,40]);i(["C",1050,40,1010,40,1010,40]);i(["C",1010,40,1010,10,1010,10]);i(["M",1010,50]);i(["C",1010,50,1040,50,1040,50]);i(["C",1040,50,1040,90,1040,90]);i(["C",1040,90,1010,90,1010,90]);i(["M",1010,100]);i(["C",1030,120,1050,120,1050,100]);i(["M",1010,140]);i(["C",1020,115,1030,115,1040,140]);i(["C",1050,165,1050,165,1060,140]);i(["M",1080,10]);i(["C",1100,29.999999999999996,1120,29.999999999999996,1140,10]);i(["M",1080,50]);i(["C",1086.6666666666667,63.33333333333333,1093.3333333333333,63.33333333333333,1100,50]);i(["C",1106.6666666666667,36.666666666666664,1113.3333333333333,36.666666666666664,1120,50]);i(["M",1080,80]);i(["C",1080,95.39600717839002,1096.6666666666667,105.01851166488379,1110,97.32050807568878]);i(["C",1116.18802153517,93.74785217660714,1120,87.14531179816328,1120,80])});it("Snap.path.isPointInside",function(){var e="M10 10 H 50 V 40 H 10 L 10 10 ZM10 50 L 40 50 L 40 90 L 10 90 ZM10 100 C 30 120, 50 120, 50 100 ZM10 140 C 20 115, 30, 115, 40 140 S 50 165, 60 140 ZM80 10 Q 110 40, 140 10 ZM80 50 Q 90 70, 100 50 T 120 50 ZM80 80 A 10 10 0 0 0 120 80 Z";expect(Snap.path.isPointInside(e,15,35)).to.be(!0);expect(Snap.path.isPointInside(e,35,75)).to.be(!0);expect(Snap.path.isPointInside(e,15,102)).to.be(!0);expect(Snap.path.isPointInside(e,15,135)).to.be(!0);expect(Snap.path.isPointInside(e,50,145)).to.be(!0);expect(Snap.path.isPointInside(e,130,15)).to.be(!0);expect(Snap.path.isPointInside(e,110,45)).to.be(!0);expect(Snap.path.isPointInside(e,85,55)).to.be(!0);expect(Snap.path.isPointInside(e,115,82)).to.be(!0);expect(Snap.path.isPointInside(e,95,98)).to.be(!0);expect(Snap.path.isPointInside(e,5,5)).to.be(!1);expect(Snap.path.isPointInside(e,25,48)).to.be(!1);expect(Snap.path.isPointInside(e,42,87)).to.be(!1);expect(Snap.path.isPointInside(e,12,105)).to.be(!1);expect(Snap.path.isPointInside(e,47,113)).to.be(!1);expect(Snap.path.isPointInside(e,47,135)).to.be(!1);expect(Snap.path.isPointInside(e,25,142)).to.be(!1);expect(Snap.path.isPointInside(e,15,125)).to.be(!1);expect(Snap.path.isPointInside(e,43,152)).to.be(!1);expect(Snap.path.isPointInside(e,58,152)).to.be(!1);expect(Snap.path.isPointInside(e,90,21)).to.be(!1);expect(Snap.path.isPointInside(e,130,21)).to.be(!1);expect(Snap.path.isPointInside(e,95,48)).to.be(!1);expect(Snap.path.isPointInside(e,110,55)).to.be(!1);expect(Snap.path.isPointInside(e,100,70)).to.be(!1);expect(Snap.path.isPointInside(e,115,96)).to.be(!1);expect(Snap.path.isPointInside(e,85,96)).to.be(!1);expect(Snap.path.isPointInside("M1.4315332974182866,4.405806462382467 L57.26133189673147,176.23225849529868 A185.30156250000002,185.30156250000002 0 0 1 -172.2890356108522,-68.21405480708441 L-4.307225890271305,-1.7053513701771101 A4.6325390625,4.6325390625 0 0 0 1.4315332974182866,4.405806462382467 Z",-58.296875,70.96875)).to.be(!0)});it("Snap.path.intersection",function(){var e="M10 10 H 50 V 40 H 10 L 10 10 ZM10 50 L 40 50 L 40 90 L 10 90 ZM10 100 C 30 120, 50 120, 50 100 ZM10 140 C 20 115, 30, 115, 40 140 S 50 165, 60 140 ZM80 10 Q 110 40, 140 10 ZM80 50 Q 90 70, 100 50 T 120 50 ZM80 80 A 10 10 0 0 0 120 80 Z",t="M10,0 L80,200 L20, 200 L30, 0 L110, 15 L90, 150",n=Snap.path.intersection(e,t);expect(n.length).to.be(22);var r=n[0];expect(r.x).to.be.a("number");expect(r.y).to.be.a("number");expect(r.t1).to.be.a("number");expect(r.t2).to.be.a("number");expect(r.segment1).to.be.a("number");expect(r.segment2).to.be.a("number");expect(r.bez1).to.be.an("array");expect(r.bez2).to.be.an("array");var i=function(e,t,r){expect(+n[e].x.toFixed(2)).to.be(t);expect(+n[e].y.toFixed(2)).to.be(r)};i(0,13.5,10);i(1,29.5,10);i(2,24,40);i(3,28,40);i(4,27.5,50);i(5,27.5,50);i(6,40,85.71);i(7,25.5,90);i(8,48.06,108.75);i(9,24.46,110.77);i(10,45,100);i(11,25,100);i(12,23.91,121.7);i(13,59.46,141.31);i(14,59,140);i(15,23,140);i(16,108.55,24.82);i(17,83.33,10);i(18,106,42);i(19,104.81,50);i(20,97.49,99.44);i(21,100.37,80)})});