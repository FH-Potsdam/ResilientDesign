// Copyright (c) 2013 - 2015 Adobe Systems Incorporated. All rights reserved.
// 
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
// 
// http://www.apache.org/licenses/LICENSE-2.0
// 
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
var Snap=function(e){function t(e,r){if(e){if(e.nodeType)return ct(e);if(F(e,"array")&&t.set)return t.set.apply(t,e);if(e instanceof ut)return e;if(r==null){e=n.doc.querySelector(String(e));return ct(e)}}e=e==null?"100%":e;r=r==null?"100%":r;return new lt(e,r)}function B(e,t){if(t){e=="#text"&&(e=n.doc.createTextNode(t.text||t["#text"]||""));e=="#comment"&&(e=n.doc.createComment(t.text||t["#text"]||""));typeof e=="string"&&(e=B(e));if(typeof t=="string")return e.nodeType==1?t.substring(0,6)=="xlink:"?e.getAttributeNS(_,t.substring(6)):t.substring(0,4)=="xml:"?e.getAttributeNS(D,t.substring(4)):e.getAttribute(t):t=="text"?e.nodeValue:null;if(e.nodeType==1){for(var s in t)if(t[r](s)){var o=i(t[s]);o?s.substring(0,6)=="xlink:"?e.setAttributeNS(_,s.substring(6),o):s.substring(0,4)=="xml:"?e.setAttributeNS(D,s.substring(4),o):e.setAttribute(s,o):e.removeAttribute(s)}}else"text"in t&&(e.nodeValue=t.text)}else e=n.doc.createElementNS(D,e);return e}function j(e){var t=e.attributes,n,r={};for(var i=0;i<t.length;i++){t[i].namespaceURI==_?n="xlink:":n="";n+=t[i].name;r[n]=t[i].textContent}return r}function F(e,t){t=i.prototype.toLowerCase.call(t);return t=="finite"?isFinite(e):t=="array"&&(e instanceof Array||Array.isArray&&Array.isArray(e))?!0:t=="null"&&e===null||t==typeof e&&e!==null||t=="object"&&e===Object(e)||m.call(e).slice(8,-1).toLowerCase()==t}function I(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[r](n)&&(t[n]=I(e[n]));return t}function q(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function R(e,t,n){function i(){var s=Array.prototype.slice.call(arguments,0),o=s.join("␀"),u=i.cache=i.cache||{},a=i.count=i.count||[];if(u[r](o)){q(a,o);return n?n(u[o]):u[o]}a.length>=1e3&&delete u[a.shift()];a.push(o);u[o]=e.apply(t,s);return n?n(u[o]):u[o]}return i}function U(e,t,n,r,i,s){if(i==null){var o=e-n,a=t-r;return!o&&!a?0:(180+u.atan2(-a,-o)*180/h+360)%360}return U(e,t,i,s)-U(n,r,i,s)}function z(e){return e%360*h/180}function W(e){return e*180/h%360}function X(){return this.x+v+this.y}function V(){return this.x+v+this.y+v+this.width+" × "+this.height}function et(e){var t=[];e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,n,r){r=r.split(/\s*,\s*|\s+/);n=="rotate"&&r.length==1&&r.push(0,0);if(n=="scale"){r.length>2?r=r.slice(0,2):r.length==2&&r.push(0,0);r.length==1&&r.push(r[0],0,0)}n=="skewX"?t.push(["m",1,0,u.tan(z(r[0])),1,0,0]):n=="skewY"?t.push(["m",1,u.tan(z(r[0])),0,1,0,0]):t.push([n.charAt(0)].concat(r));return e});return t}function tt(e,n){var r=Z(e),s=new t.Matrix;if(r)for(var o=0,u=r.length;o<u;o++){var a=r[o],f=a.length,l=i(a[0]).toLowerCase(),c=a[0]!=l,h=c?s.invert():0,p,d,v,m,g;if(l=="t"&&f==2)s.translate(a[1],0);else if(l=="t"&&f==3)if(c){p=h.x(0,0);d=h.y(0,0);v=h.x(a[1],a[2]);m=h.y(a[1],a[2]);s.translate(v-p,m-d)}else s.translate(a[1],a[2]);else if(l=="r"){if(f==2){g=g||n;s.rotate(a[1],g.x+g.width/2,g.y+g.height/2)}else if(f==4)if(c){v=h.x(a[2],a[3]);m=h.y(a[2],a[3]);s.rotate(a[1],v,m)}else s.rotate(a[1],a[2],a[3])}else if(l=="s"){if(f==2||f==3){g=g||n;s.scale(a[1],a[f-1],g.x+g.width/2,g.y+g.height/2)}else if(f==4)if(c){v=h.x(a[2],a[3]);m=h.y(a[2],a[3]);s.scale(a[1],a[1],v,m)}else s.scale(a[1],a[1],a[2],a[3]);else if(f==5)if(c){v=h.x(a[3],a[4]);m=h.y(a[3],a[4]);s.scale(a[1],a[2],v,m)}else s.scale(a[1],a[2],a[3],a[4])}else l=="m"&&f==7&&s.add(a[1],a[2],a[3],a[4],a[5],a[6])}return s}function rt(e){var n=e.node.ownerSVGElement&&ct(e.node.ownerSVGElement)||e.node.parentNode&&ct(e.node.parentNode)||t.select("svg")||t(0,0),r=n.select("defs"),i=r==null?!1:r.node;i||(i=ft("defs",n.node).node);return i}function it(e){return e.node.ownerSVGElement&&ct(e.node.ownerSVGElement)||t.select("svg")}function st(e,t,n){function o(e){if(e==null)return d;if(e==+e)return e;B(s,{width:e});try{return s.getBBox().width}catch(t){return 0}}function u(e){if(e==null)return d;if(e==+e)return e;B(s,{height:e});try{return s.getBBox().height}catch(t){return 0}}function a(r,s){t==null?i[r]=s(e.attr(r)||0):r==t&&(i=s(n==null?e.attr(r)||0:n))}var r=it(e).node,i={},s=r.querySelector(".svg---mgr");if(!s){s=B("rect");B(s,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"});r.appendChild(s)}switch(e.type){case"rect":a("rx",o);a("ry",u);case"image":a("width",o);a("height",u);case"text":a("x",o);a("y",u);break;case"circle":a("cx",o);a("cy",u);a("r",o);break;case"ellipse":a("cx",o);a("cy",u);a("rx",o);a("ry",u);break;case"line":a("x1",o);a("x2",o);a("y1",u);a("y2",u);break;case"marker":a("refX",o);a("markerWidth",o);a("refY",u);a("markerHeight",u);break;case"radialGradient":a("fx",o);a("fy",u);break;case"tspan":a("dx",o);a("dy",u);break;default:a(t,o)}r.removeChild(s);return i}function ot(e){F(e,"array")||(e=Array.prototype.slice.call(arguments,0));var t=0,n=0,r=this.node;while(this[t])delete this[t++];for(t=0;t<e.length;t++)e[t].type=="set"?e[t].forEach(function(e){r.appendChild(e.node)}):r.appendChild(e[t].node);var i=r.childNodes;for(t=0;t<i.length;t++)this[n++]=ct(i[t]);return this}function ut(e){if(e.snap in P)return P[e.snap];var t;try{t=e.ownerSVGElement}catch(n){}this.node=e;t&&(this.paper=new lt(t));this.type=e.tagName||e.nodeName;var i=this.id=M(this);this.anims={};this._={transform:[]};e.snap=i;P[i]=this;this.type=="g"&&(this.add=ot);if(this.type in{g:1,mask:1,pattern:1,symbol:1})for(var s in lt.prototype)lt.prototype[r](s)&&(this[s]=lt.prototype[s])}function at(e){this.node=e}function ft(e,t){var n=B(e);t.appendChild(n);var r=ct(n);return r}function lt(e,t){var i,s,o,u=lt.prototype;if(e&&e.tagName=="svg"){if(e.snap in P)return P[e.snap];var a=e.ownerDocument;i=new ut(e);s=e.getElementsByTagName("desc")[0];o=e.getElementsByTagName("defs")[0];if(!s){s=B("desc");s.appendChild(a.createTextNode("Created with Snap"));i.node.appendChild(s)}if(!o){o=B("defs");i.node.appendChild(o)}i.defs=o;for(var f in u)u[r](f)&&(i[f]=u[f]);i.paper=i.root=i}else{i=ft("svg",n.doc.body);B(i.node,{height:t,version:1.1,width:e,xmlns:D})}return i}function ct(e){return e?e instanceof ut||e instanceof at?e:e.tagName&&e.tagName.toLowerCase()=="svg"?new lt(e):e.tagName&&e.tagName.toLowerCase()=="object"&&e.type=="image/svg+xml"?new lt(e.contentDocument.getElementsByTagName("svg")[0]):new ut(e):e}function ht(e,t){for(var n=0,r=e.length;n<r;n++){var i={type:e[n].type,attr:e[n].attr()},s=e[n].children();t.push(i);s.length&&ht(s,i.childNodes=[])}}t.version="0.4.0";t.toString=function(){return"Snap v"+this.version};t._={};var n={win:e.window,doc:e.window.document};t._.glob=n;var r="hasOwnProperty",i=String,s=parseFloat,o=parseInt,u=Math,a=u.max,f=u.min,l=u.abs,c=u.pow,h=u.PI,p=u.round,d="",v=" ",m=Object.prototype.toString,y=/^url\(['"]?([^\)]+?)['"]?\)$/i,b=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,w=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,E=/^url\(#?([^)]+)\)$/,S=t._.separator=/[,\s]+/,x=/[\s]/g,T=/[\s]*,[\s]*/,N={hs:1,rg:1},C=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/ig,k=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/ig,L=/(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/ig,A=0,O="S"+(+(new Date)).toString(36),M=function(e){return(e&&e.type?e.type:d)+O+(A++).toString(36)},_="http://www.w3.org/1999/xlink",D="http://www.w3.org/2000/svg",P={},H=t.url=function(e){return"url('#"+e+"')"};t._.$=B;t._.id=M;t.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(e,n,r){var i=r;n.replace(t,function(e,t,n,r,s){t=t||r;if(i){t in i&&(i=i[t]);typeof i=="function"&&s&&(i=i())}});i=(i==null||i==r?e:i)+"";return i};return function(t,r){return i(t).replace(e,function(e,t){return n(e,t,r)})}}();t._.clone=I;t._.cacher=R;t.rad=z;t.deg=W;t.sin=function(e){return u.sin(t.rad(e))};t.tan=function(e){return u.tan(t.rad(e))};t.cos=function(e){return u.cos(t.rad(e))};t.asin=function(e){return t.deg(u.asin(e))};t.acos=function(e){return t.deg(u.acos(e))};t.atan=function(e){return t.deg(u.atan(e))};t.atan2=function(e){return t.deg(u.atan2(e))};t.angle=U;t.len=function(e,n,r,i){return Math.sqrt(t.len2(e,n,r,i))};t.len2=function(e,t,n,r){return(e-n)*(e-n)+(t-r)*(t-r)};t.closestPoint=function(e,t,n){function r(e){var r=e.x-t,i=e.y-n;return r*r+i*i}var i=e.node,s=i.getTotalLength(),o=s/i.pathSegList.numberOfItems*.125,u,a,f=Infinity;for(var l,c=0,h;c<=s;c+=o)(h=r(l=i.getPointAtLength(c)))<f&&(u=l,a=c,f=h);o*=.5;while(o>.5){var p,d,v,m,g,y;(v=a-o)>=0&&(g=r(p=i.getPointAtLength(v)))<f?(u=p,a=v,f=g):(m=a+o)<=s&&(y=r(d=i.getPointAtLength(m)))<f?(u=d,a=m,f=y):o*=.5}u={x:u.x,y:u.y,length:a,distance:Math.sqrt(f)};return u};t.is=F;t.snapTo=function(e,t,n){n=F(n,"finite")?n:10;if(F(e,"array")){var r=e.length;while(r--)if(l(e[r]-t)<=n)return e[r]}else{e=+e;var i=t%e;if(i<n)return t-i;if(i>e-n)return t-i+e}return t};t.getRGB=R(function(e){if(!e||!!((e=i(e)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Q};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Q};!N[r](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=$(e));if(!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Q};var n,l,c,h,p,d,v,m=e.match(b);if(m){if(m[2]){h=o(m[2].substring(5),16);c=o(m[2].substring(3,5),16);l=o(m[2].substring(1,3),16)}if(m[3]){h=o((d=m[3].charAt(3))+d,16);c=o((d=m[3].charAt(2))+d,16);l=o((d=m[3].charAt(1))+d,16)}if(m[4]){v=m[4].split(T);l=s(v[0]);v[0].slice(-1)=="%"&&(l*=2.55);c=s(v[1]);v[1].slice(-1)=="%"&&(c*=2.55);h=s(v[2]);v[2].slice(-1)=="%"&&(h*=2.55);m[1].toLowerCase().slice(0,4)=="rgba"&&(p=s(v[3]));v[3]&&v[3].slice(-1)=="%"&&(p/=100)}if(m[5]){v=m[5].split(T);l=s(v[0]);v[0].slice(-1)=="%"&&(l/=100);c=s(v[1]);v[1].slice(-1)=="%"&&(c/=100);h=s(v[2]);v[2].slice(-1)=="%"&&(h/=100);(v[0].slice(-3)=="deg"||v[0].slice(-1)=="°")&&(l/=360);m[1].toLowerCase().slice(0,4)=="hsba"&&(p=s(v[3]));v[3]&&v[3].slice(-1)=="%"&&(p/=100);return t.hsb2rgb(l,c,h,p)}if(m[6]){v=m[6].split(T);l=s(v[0]);v[0].slice(-1)=="%"&&(l/=100);c=s(v[1]);v[1].slice(-1)=="%"&&(c/=100);h=s(v[2]);v[2].slice(-1)=="%"&&(h/=100);(v[0].slice(-3)=="deg"||v[0].slice(-1)=="°")&&(l/=360);m[1].toLowerCase().slice(0,4)=="hsla"&&(p=s(v[3]));v[3]&&v[3].slice(-1)=="%"&&(p/=100);return t.hsl2rgb(l,c,h,p)}l=f(u.round(l),255);c=f(u.round(c),255);h=f(u.round(h),255);p=f(a(p,0),1);m={r:l,g:c,b:h,toString:Q};m.hex="#"+(16777216|h|c<<8|l<<16).toString(16).slice(1);m.opacity=F(p,"finite")?p:1;return m}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Q}},t);t.hsb=R(function(e,n,r){return t.hsb2rgb(e,n,r).hex});t.hsl=R(function(e,n,r){return t.hsl2rgb(e,n,r).hex});t.rgb=R(function(e,t,n,r){if(F(r,"finite")){var i=u.round;return"rgba("+[i(e),i(t),i(n),+r.toFixed(2)]+")"}return"#"+(16777216|n|t<<8|e<<16).toString(16).slice(1)});var $=function(e){var t=n.doc.getElementsByTagName("head")[0]||n.doc.getElementsByTagName("svg")[0],r="rgb(255, 0, 0)";$=R(function(e){if(e.toLowerCase()=="red")return r;t.style.color=r;t.style.color=e;var i=n.doc.defaultView.getComputedStyle(t,d).getPropertyValue("color");return i==r?null:i});return $(e)},J=function(){return"hsb("+[this.h,this.s,this.b]+")"},K=function(){return"hsl("+[this.h,this.s,this.l]+")"},Q=function(){return this.opacity==1||this.opacity==null?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},G=function(e,n,r){if(n==null&&F(e,"object")&&"r"in e&&"g"in e&&"b"in e){r=e.b;n=e.g;e=e.r}if(n==null&&F(e,string)){var i=t.getRGB(e);e=i.r;n=i.g;r=i.b}if(e>1||n>1||r>1){e/=255;n/=255;r/=255}return[e,n,r]},Y=function(e,n,r,i){e=u.round(e*255);n=u.round(n*255);r=u.round(r*255);var s={r:e,g:n,b:r,opacity:F(i,"finite")?i:1,hex:t.rgb(e,n,r),toString:Q};F(i,"finite")&&(s.opacity=i);return s};t.color=function(e){var n;if(F(e,"object")&&"h"in e&&"s"in e&&"b"in e){n=t.hsb2rgb(e);e.r=n.r;e.g=n.g;e.b=n.b;e.opacity=1;e.hex=n.hex}else if(F(e,"object")&&"h"in e&&"s"in e&&"l"in e){n=t.hsl2rgb(e);e.r=n.r;e.g=n.g;e.b=n.b;e.opacity=1;e.hex=n.hex}else{F(e,"string")&&(e=t.getRGB(e));if(F(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)){n=t.rgb2hsl(e);e.h=n.h;e.s=n.s;e.l=n.l;n=t.rgb2hsb(e);e.v=n.b}else{e={hex:"none"};e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1;e.error=1}}e.toString=Q;return e};t.hsb2rgb=function(e,t,n,r){if(F(e,"object")&&"h"in e&&"s"in e&&"b"in e){n=e.b;t=e.s;r=e.o;e=e.h}e*=360;var i,s,o,u,a;e=e%360/60;a=n*t;u=a*(1-l(e%2-1));i=s=o=n-a;e=~~e;i+=[a,u,0,0,u,a][e];s+=[u,a,a,u,0,0][e];o+=[0,0,u,a,a,u][e];return Y(i,s,o,r)};t.hsl2rgb=function(e,t,n,r){if(F(e,"object")&&"h"in e&&"s"in e&&"l"in e){n=e.l;t=e.s;e=e.h}if(e>1||t>1||n>1){e/=360;t/=100;n/=100}e*=360;var i,s,o,u,a;e=e%360/60;a=2*t*(n<.5?n:1-n);u=a*(1-l(e%2-1));i=s=o=n-a/2;e=~~e;i+=[a,u,0,0,u,a][e];s+=[u,a,a,u,0,0][e];o+=[0,0,u,a,a,u][e];return Y(i,s,o,r)};t.rgb2hsb=function(e,t,n){n=G(e,t,n);e=n[0];t=n[1];n=n[2];var r,i,s,o;s=a(e,t,n);o=s-f(e,t,n);r=o==0?null:s==e?(t-n)/o:s==t?(n-e)/o+2:(e-t)/o+4;r=(r+360)%6*60/360;i=o==0?0:o/s;return{h:r,s:i,b:s,toString:J}};t.rgb2hsl=function(e,t,n){n=G(e,t,n);e=n[0];t=n[1];n=n[2];var r,i,s,o,u,l;o=a(e,t,n);u=f(e,t,n);l=o-u;r=l==0?null:o==e?(t-n)/l:o==t?(n-e)/l+2:(e-t)/l+4;r=(r+360)%6*60/360;s=(o+u)/2;i=l==0?0:s<.5?l/(2*s):l/(2-2*s);return{h:r,s:i,l:s,toString:K}};t.parsePathString=function(e){if(!e)return null;var n=t.path(e);if(n.arr)return t.path.clone(n.arr);var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},s=[];F(e,"array")&&F(e[0],"array")&&(s=t.path.clone(e));s.length||i(e).replace(C,function(e,t,n){var i=[],o=t.toLowerCase();n.replace(L,function(e,t){t&&i.push(+t)});if(o=="m"&&i.length>2){s.push([t].concat(i.splice(0,2)));o="l";t=t=="m"?"l":"L"}o=="o"&&i.length==1&&s.push([t,i[0]]);if(o=="r")s.push([t].concat(i));else while(i.length>=r[o]){s.push([t].concat(i.splice(0,r[o])));if(!r[o])break}});s.toString=t.path.toString;n.arr=t.path.clone(s);return s};var Z=t.parseTransformString=function(e){if(!e)return null;var n={r:3,s:4,t:2,m:6},r=[];F(e,"array")&&F(e[0],"array")&&(r=t.path.clone(e));r.length||i(e).replace(k,function(e,t,n){var i=[],s=t.toLowerCase();n.replace(L,function(e,t){t&&i.push(+t)});r.push([t].concat(i))});r.toString=t.path.toString;return r};t._.svgTransform2string=et;t._.rgTransform=/^[a-z][\s]*-?\.?\d/i;t._.transform2matrix=tt;t._unit2px=st;var nt=n.doc.contains||n.doc.compareDocumentPosition?function(e,t){var n=e.nodeType==9?e.documentElement:e,r=t&&t.parentNode;return e==r||!!r&&r.nodeType==1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t){t=t.parentNode;if(t==e)return!0}return!1};t._.getSomeDefs=rt;t._.getSomeSVG=it;t.select=function(e){e=i(e).replace(/([^\\]):/g,"$1\\:");return ct(n.doc.querySelector(e))};t.selectAll=function(e){var r=n.doc.querySelectorAll(e),i=(t.set||Array)();for(var s=0;s<r.length;s++)i.push(ct(r[s]));return i};setInterval(function(){for(var e in P)if(P[r](e)){var t=P[e],n=t.node;(t.type!="svg"&&!n.ownerSVGElement||t.type=="svg"&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete P[e]}},1e4);ut.prototype.attr=function(e,t){var n=this,i=n.node;if(!e){if(i.nodeType!=1)return{text:i.nodeValue};var s=i.attributes,o={};for(var u=0,a=s.length;u<a;u++)o[s[u].nodeName]=s[u].nodeValue;return o}if(F(e,"string")){if(!(arguments.length>1))return eve("snap.util.getattr."+e,n).firstDefined();var f={};f[e]=t;e=f}for(var l in e)e[r](l)&&eve("snap.util.attr."+l,n,e[l]);return n};t.parse=function(e){var t=n.doc.createDocumentFragment(),r=!0,s=n.doc.createElement("div");e=i(e);if(!e.match(/^\s*<\s*svg(?:\s|>)/)){e="<svg>"+e+"</svg>";r=!1}s.innerHTML=e;e=s.getElementsByTagName("svg")[0];if(e)if(r)t=e;else while(e.firstChild)t.appendChild(e.firstChild);return new at(t)};t.fragment=function(){var e=Array.prototype.slice.call(arguments,0),r=n.doc.createDocumentFragment();for(var i=0,s=e.length;i<s;i++){var o=e[i];o.node&&o.node.nodeType&&r.appendChild(o.node);o.nodeType&&r.appendChild(o);typeof o=="string"&&r.appendChild(t.parse(o).node)}return new at(r)};t._.make=ft;t._.wrap=ct;lt.prototype.el=function(e,t){var n=ft(e,this.node);t&&n.attr(t);return n};ut.prototype.children=function(){var e=[],n=this.node.childNodes;for(var r=0,i=n.length;r<i;r++)e[r]=t(n[r]);return e};ut.prototype.toJSON=function(){var e=[];ht([this],e);return e[0]};eve.on("snap.util.getattr",function(){var e=eve.nt();e=e.substring(e.lastIndexOf(".")+1);var t=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return pt[r](t)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(t):B(this.node,e)});var pt={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};eve.on("snap.util.attr",function(e){var t=eve.nt(),n={};t=t.substring(t.lastIndexOf(".")+1);n[t]=e;var i=t.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),s=t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});pt[r](s)?this.node.style[i]=e==null?d:e:B(this.node,n)});(function(e){})(lt.prototype);t.ajax=function(e,t,n,r){var i=new XMLHttpRequest,s=M();if(i){if(F(t,"function")){r=n;n=t;t=null}else if(F(t,"object")){var o=[];for(var u in t)t.hasOwnProperty(u)&&o.push(encodeURIComponent(u)+"="+encodeURIComponent(t[u]));t=o.join("&")}i.open(t?"POST":"GET",e,!0);if(t){i.setRequestHeader("X-Requested-With","XMLHttpRequest");i.setRequestHeader("Content-type","application/x-www-form-urlencoded")}if(n){eve.once("snap.ajax."+s+".0",n);eve.once("snap.ajax."+s+".200",n);eve.once("snap.ajax."+s+".304",n)}i.onreadystatechange=function(){if(i.readyState!=4)return;eve("snap.ajax."+s+"."+i.status,r,i)};if(i.readyState==4)return i;i.send(t);return i}};t.load=function(e,n,r){t.ajax(e,function(e){var i=t.parse(e.responseText);r?n.call(r,i):n(i)})};var dt=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.body,i=n.documentElement,s=i.clientTop||r.clientTop||0,o=i.clientLeft||r.clientLeft||0,u=t.top+(g.win.pageYOffset||i.scrollTop||r.scrollTop)-s,a=t.left+(g.win.pageXOffset||i.scrollLeft||r.scrollLeft)-o;return{y:u,x:a}};t.getElementByPoint=function(e,t){var r=this,i=r.canvas,s=n.doc.elementFromPoint(e,t);if(n.win.opera&&s.tagName=="svg"){var o=dt(s),u=s.createSVGRect();u.x=e-o.x;u.y=t-o.y;u.width=u.height=1;var a=s.getIntersectionList(u,null);a.length&&(s=a[a.length-1])}return s?ct(s):null};t.plugin=function(e){e(t,ut,lt,n,at)};n.win.Snap=t;return t}(window||this);