// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.
// 
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
// 
// http://www.apache.org/licenses/LICENSE-2.0
// 
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
Snap.plugin(function(e,t,n,r,i){function f(e){return e}function l(e){return function(t){return+t.toFixed(3)+e}}var s={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},o=String,u=/[a-z]+$/i,a=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;eve.on("snap.util.attr",function(e){var t=o(e).match(a);if(t){var n=eve.nt(),r=n.substring(n.lastIndexOf(".")+1),i=this.attr(r),f={};eve.stop();var l=t[3]||"",c=i.match(u),h=s[t[1]];if(c&&c==l)e=h(parseFloat(i),+t[2]);else{i=this.asPX(r);e=h(this.asPX(r),this.asPX(r,t[2]+l))}if(isNaN(i)||isNaN(e))return;f[r]=e;this.attr(f)}})(-10);eve.on("snap.util.equal",function(e,t){var n,r,i=o(this.attr(e)||""),c=this,h=o(t).match(a);if(h){eve.stop();var p=h[3]||"",d=i.match(u),v=s[h[1]];if(d&&d==p)return{from:parseFloat(i),to:v(parseFloat(i),+h[2]),f:l(d)};i=this.asPX(e);return{from:i,to:v(i,this.asPX(e,h[2]+p)),f:f}}})(-10)});