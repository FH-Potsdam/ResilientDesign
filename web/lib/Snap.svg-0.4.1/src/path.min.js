// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.
// 
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
// 
// http://www.apache.org/licenses/LICENSE-2.0
// 
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
Snap.plugin(function(e,t,n,r){function m(e){var t=m.ps=m.ps||{};t[e]?t[e].sleep=100:t[e]={sleep:100};setTimeout(function(){for(var n in t)if(t[u](n)&&n!=e){t[n].sleep--;!t[n].sleep&&delete t[n]}});return t[e]}function g(e,t,n,r){e==null&&(e=t=n=r=0);if(t==null){t=e.y;n=e.width;r=e.height;e=e.x}return{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:l.min(n,r)/2,r2:l.max(n,r)/2,r0:l.sqrt(n*n+r*r)/2,path:R(e,t,n,r),vb:[e,t,n,r].join(" ")}}function y(){return this.join(",").replace(a,"$1")}function b(e){var t=o(e);t.toString=y;return t}function w(e,t,n,r,i,s,o,u,a){return a==null?O(e,t,n,r,i,s,o,u):N(e,t,n,r,i,s,o,u,M(e,t,n,r,i,s,o,u,a))}function E(n,r){function i(e){return+(+e).toFixed(3)}return e._.cacher(function(e,s,o){e instanceof t&&(e=e.attr("d"));e=Y(e);var u,a,f,l,c="",h={},p,d=0;for(var v=0,m=e.length;v<m;v++){f=e[v];if(f[0]=="M"){u=+f[1];a=+f[2]}else{l=w(u,a,f[1],f[2],f[3],f[4],f[5],f[6]);if(d+l>s){if(r&&!h.start){p=w(u,a,f[1],f[2],f[3],f[4],f[5],f[6],s-d);c+=["C"+i(p.start.x),i(p.start.y),i(p.m.x),i(p.m.y),i(p.x),i(p.y)];if(o)return c;h.start=c;c=["M"+i(p.x),i(p.y)+"C"+i(p.n.x),i(p.n.y),i(p.end.x),i(p.end.y),i(f[5]),i(f[6])].join();d+=l;u=+f[5];a=+f[6];continue}if(!n&&!r){p=w(u,a,f[1],f[2],f[3],f[4],f[5],f[6],s-d);return p}}d+=l;u=+f[5];a=+f[6]}c+=f.shift()+f}h.end=c;p=n?d:r?h:N(u,a,f[0],f[1],f[2],f[3],f[4],f[5],1);return p},null,e._.clone)}function N(e,t,n,r,i,s,o,u,a){var f=1-a,h=d(f,3),p=d(f,2),v=a*a,m=v*a,g=h*e+p*3*a*n+f*3*a*a*i+m*o,y=h*t+p*3*a*r+f*3*a*a*s+m*u,b=e+2*a*(n-e)+v*(i-2*n+e),w=t+2*a*(r-t)+v*(s-2*r+t),E=n+2*a*(i-n)+v*(o-2*i+n),S=r+2*a*(s-r)+v*(u-2*s+r),x=f*e+a*n,T=f*t+a*r,N=f*i+a*o,C=f*s+a*u,k=90-l.atan2(b-E,w-S)*180/c;return{x:g,y:y,m:{x:b,y:w},n:{x:E,y:S},start:{x:x,y:T},end:{x:N,y:C},alpha:k}}function C(t,n,r,i,s,o,u,a){e.is(t,"array")||(t=[t,n,r,i,s,o,u,a]);var f=G.apply(null,t);return g(f.min.x,f.min.y,f.max.x-f.min.x,f.max.y-f.min.y)}function k(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function L(e,t){e=g(e);t=g(t);return k(t,e.x,e.y)||k(t,e.x2,e.y)||k(t,e.x,e.y2)||k(t,e.x2,e.y2)||k(e,t.x,t.y)||k(e,t.x2,t.y)||k(e,t.x,t.y2)||k(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function A(e,t,n,r,i){var s=-3*t+9*n-9*r+3*i,o=e*s+6*t-12*n+6*r;return e*o-3*t+3*n}function O(e,t,n,r,i,s,o,u,a){a==null&&(a=1);a=a>1?1:a<0?0:a;var f=a/2,c=12,h=[-0.1252,.1252,-0.3678,.3678,-0.5873,.5873,-0.7699,.7699,-0.9041,.9041,-0.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0;for(var v=0;v<c;v++){var m=f*h[v]+f,g=A(m,e,n,i,o),y=A(m,t,r,s,u),b=g*g+y*y;d+=p[v]*l.sqrt(b)}return f*d}function M(e,t,n,r,i,s,o,u,a){if(a<0||O(e,t,n,r,i,s,o,u)<a)return;var f=1,l=f/2,c=f-l,h,p=.01;h=O(e,t,n,r,i,s,o,u,c);while(v(h-a)>p){l/=2;c+=(h<a?1:-1)*l;h=O(e,t,n,r,i,s,o,u,c)}return c}function _(e,t,n,r,i,s,o,u){if(p(e,n)<h(i,o)||h(e,n)>p(i,o)||p(t,r)<h(s,u)||h(t,r)>p(s,u))return;var a=(e*r-t*n)*(i-o)-(e-n)*(i*u-s*o),f=(e*r-t*n)*(s-u)-(t-r)*(i*u-s*o),l=(e-n)*(s-u)-(t-r)*(i-o);if(!l)return;var c=a/l,d=f/l,v=+c.toFixed(2),m=+d.toFixed(2);if(v<+h(e,n).toFixed(2)||v>+p(e,n).toFixed(2)||v<+h(i,o).toFixed(2)||v>+p(i,o).toFixed(2)||m<+h(t,r).toFixed(2)||m>+p(t,r).toFixed(2)||m<+h(s,u).toFixed(2)||m>+p(s,u).toFixed(2))return;return{x:c,y:d}}function D(e,t){return H(e,t)}function P(e,t){return H(e,t,1)}function H(e,t,n){var r=C(e),i=C(t);if(!L(r,i))return n?0:[];var s=O.apply(0,e),o=O.apply(0,t),u=~~(s/8),a=~~(o/8),f=[],l=[],c={},h=n?0:[];for(var p=0;p<u+1;p++){var d=N.apply(0,e.concat(p/u));f.push({x:d.x,y:d.y,t:p/u})}for(p=0;p<a+1;p++){d=N.apply(0,t.concat(p/a));l.push({x:d.x,y:d.y,t:p/a})}for(p=0;p<u;p++)for(var m=0;m<a;m++){var g=f[p],y=f[p+1],b=l[m],w=l[m+1],E=v(y.x-g.x)<.001?"y":"x",S=v(w.x-b.x)<.001?"y":"x",x=_(g.x,g.y,y.x,y.y,b.x,b.y,w.x,w.y);if(x){if(c[x.x.toFixed(4)]==x.y.toFixed(4))continue;c[x.x.toFixed(4)]=x.y.toFixed(4);var T=g.t+v((x[E]-g[E])/(y[E]-g[E]))*(y.t-g.t),k=b.t+v((x[S]-b[S])/(w[S]-b[S]))*(w.t-b.t);T>=0&&T<=1&&k>=0&&k<=1&&(n?h++:h.push({x:x.x,y:x.y,t1:T,t2:k}))}}return h}function B(e,t){return F(e,t)}function j(e,t){return F(e,t,1)}function F(e,t,n){e=Y(e);t=Y(t);var r,i,s,o,u,a,f,l,c,h,p=n?0:[];for(var d=0,v=e.length;d<v;d++){var m=e[d];if(m[0]=="M"){r=u=m[1];i=a=m[2]}else{if(m[0]=="C"){c=[r,i].concat(m.slice(1));r=c[6];i=c[7]}else{c=[r,i,r,i,u,a,u,a];r=u;i=a}for(var g=0,y=t.length;g<y;g++){var b=t[g];if(b[0]=="M"){s=f=b[1];o=l=b[2]}else{if(b[0]=="C"){h=[s,o].concat(b.slice(1));s=h[6];o=h[7]}else{h=[s,o,s,o,f,l,f,l];s=f;o=l}var w=H(c,h,n);if(n)p+=w;else{for(var E=0,S=w.length;E<S;E++){w[E].segment1=d;w[E].segment2=g;w[E].bez1=c;w[E].bez2=h}p=p.concat(w)}}}}}return p}function I(e,t,n){var r=q(e);return k(r,t,n)&&F(e,[["M",t,n],["H",r.x2+10]],1)%2==1}function q(e){var t=m(e);if(t.bbox)return o(t.bbox);if(!e)return g();e=Y(e);var n=0,r=0,i=[],s=[],u;for(var a=0,f=e.length;a<f;a++){u=e[a];if(u[0]=="M"){n=u[1];r=u[2];i.push(n);s.push(r)}else{var l=G(n,r,u[1],u[2],u[3],u[4],u[5],u[6]);i=i.concat(l.min.x,l.max.x);s=s.concat(l.min.y,l.max.y);n=u[5];r=u[6]}}var c=h.apply(0,i),d=h.apply(0,s),v=p.apply(0,i),y=p.apply(0,s),b=g(c,d,v-c,y-d);t.bbox=o(b);return b}function R(e,t,n,r,i){if(i)return[["M",+e+ +i,t],["l",n-i*2,0],["a",i,i,0,0,1,i,i],["l",0,r-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-n,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-r],["a",i,i,0,0,1,i,-i],["z"]];var s=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];s.toString=y;return s}function U(e,t,n,r,i){i==null&&r==null&&(r=n);e=+e;t=+t;n=+n;r=+r;if(i!=null)var s=Math.PI/180,o=e+n*Math.cos(-r*s),u=e+n*Math.cos(-i*s),a=t+n*Math.sin(-r*s),f=t+n*Math.sin(-i*s),l=[["M",o,a],["A",n,n,0,+(i-r>180),0,u,f]];else l=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];l.toString=y;return l}function X(t){var n=m(t),r=String.prototype.toLowerCase;if(n.rel)return b(n.rel);if(!e.is(t,"array")||!e.is(t&&t[0],"array"))t=e.parsePathString(t);var i=[],s=0,o=0,u=0,a=0,f=0;if(t[0][0]=="M"){s=t[0][1];o=t[0][2];u=s;a=o;f++;i.push(["M",s,o])}for(var l=f,c=t.length;l<c;l++){var h=i[l]=[],p=t[l];if(p[0]!=r.call(p[0])){h[0]=r.call(p[0]);switch(h[0]){case"a":h[1]=p[1];h[2]=p[2];h[3]=p[3];h[4]=p[4];h[5]=p[5];h[6]=+(p[6]-s).toFixed(3);h[7]=+(p[7]-o).toFixed(3);break;case"v":h[1]=+(p[1]-o).toFixed(3);break;case"m":u=p[1];a=p[2];default:for(var d=1,v=p.length;d<v;d++)h[d]=+(p[d]-(d%2?s:o)).toFixed(3)}}else{h=i[l]=[];if(p[0]=="m"){u=p[1]+s;a=p[2]+o}for(var g=0,w=p.length;g<w;g++)i[l][g]=p[g]}var E=i[l].length;switch(i[l][0]){case"z":s=u;o=a;break;case"h":s+=+i[l][E-1];break;case"v":o+=+i[l][E-1];break;default:s+=+i[l][E-2];o+=+i[l][E-1]}}i.toString=y;n.rel=b(i);return i}function V(t){var n=m(t);if(n.abs)return b(n.abs);if(!s(t,"array")||!s(t&&t[0],"array"))t=e.parsePathString(t);if(!t||!t.length)return[["M",0,0]];var r=[],i=0,o=0,u=0,a=0,f=0,l;if(t[0][0]=="M"){i=+t[0][1];o=+t[0][2];u=i;a=o;f++;r[0]=["M",i,o]}var c=t.length==3&&t[0][0]=="M"&&t[1][0].toUpperCase()=="R"&&t[2][0].toUpperCase()=="Z";for(var h,p,d=f,v=t.length;d<v;d++){r.push(h=[]);p=t[d];l=p[0];if(l!=l.toUpperCase()){h[0]=l.toUpperCase();switch(h[0]){case"A":h[1]=p[1];h[2]=p[2];h[3]=p[3];h[4]=p[4];h[5]=p[5];h[6]=+p[6]+i;h[7]=+p[7]+o;break;case"V":h[1]=+p[1]+o;break;case"H":h[1]=+p[1]+i;break;case"R":var g=[i,o].concat(p.slice(1));for(var w=2,E=g.length;w<E;w++){g[w]=+g[w]+i;g[++w]=+g[w]+o}r.pop();r=r.concat(et(g,c));break;case"O":r.pop();g=U(i,o,p[1],p[2]);g.push(g[0]);r=r.concat(g);break;case"U":r.pop();r=r.concat(U(i,o,p[1],p[2],p[3]));h=["U"].concat(r[r.length-1].slice(-2));break;case"M":u=+p[1]+i;a=+p[2]+o;default:for(w=1,E=p.length;w<E;w++)h[w]=+p[w]+(w%2?i:o)}}else if(l=="R"){g=[i,o].concat(p.slice(1));r.pop();r=r.concat(et(g,c));h=["R"].concat(p.slice(-2))}else if(l=="O"){r.pop();g=U(i,o,p[1],p[2]);g.push(g[0]);r=r.concat(g)}else if(l=="U"){r.pop();r=r.concat(U(i,o,p[1],p[2],p[3]));h=["U"].concat(r[r.length-1].slice(-2))}else for(var S=0,x=p.length;S<x;S++)h[S]=p[S];l=l.toUpperCase();if(l!="O")switch(h[0]){case"Z":i=+u;o=+a;break;case"H":i=h[1];break;case"V":o=h[1];break;case"M":u=h[h.length-2];a=h[h.length-1];default:i=h[h.length-2];o=h[h.length-1]}}r.toString=y;n.abs=b(r);return r}function $(e,t,n,r){return[e,t,n,r,n,r]}function J(e,t,n,r,i,s){var o=1/3,u=2/3;return[o*e+u*n,o*t+u*r,o*i+u*n,o*s+u*r,i,s]}function K(t,n,r,i,s,o,u,a,f,h){var p=c*120/180,d=c/180*(+s||0),m=[],g,y=e._.cacher(function(e,t,n){var r=e*l.cos(n)-t*l.sin(n),i=e*l.sin(n)+t*l.cos(n);return{x:r,y:i}});if(!h){g=y(t,n,-d);t=g.x;n=g.y;g=y(a,f,-d);a=g.x;f=g.y;var b=l.cos(c/180*s),w=l.sin(c/180*s),E=(t-a)/2,S=(n-f)/2,x=E*E/(r*r)+S*S/(i*i);if(x>1){x=l.sqrt(x);r=x*r;i=x*i}var T=r*r,N=i*i,C=(o==u?-1:1)*l.sqrt(v((T*N-T*S*S-N*E*E)/(T*S*S+N*E*E))),k=C*r*S/i+(t+a)/2,L=C*-i*E/r+(n+f)/2,A=l.asin(((n-L)/i).toFixed(9)),O=l.asin(((f-L)/i).toFixed(9));A=t<k?c-A:A;O=a<k?c-O:O;A<0&&(A=c*2+A);O<0&&(O=c*2+O);u&&A>O&&(A-=c*2);!u&&O>A&&(O-=c*2)}else{A=h[0];O=h[1];k=h[2];L=h[3]}var M=O-A;if(v(M)>p){var _=O,D=a,P=f;O=A+p*(u&&O>A?1:-1);a=k+r*l.cos(O);f=L+i*l.sin(O);m=K(a,f,r,i,s,0,u,D,P,[O,_,k,L])}M=O-A;var H=l.cos(A),B=l.sin(A),j=l.cos(O),F=l.sin(O),I=l.tan(M/4),q=4/3*r*I,R=4/3*i*I,U=[t,n],z=[t+q*B,n-R*H],W=[a+q*F,f-R*j],X=[a,f];z[0]=2*U[0]-z[0];z[1]=2*U[1]-z[1];if(h)return[z,W,X].concat(m);m=[z,W,X].concat(m).join().split(",");var V=[];for(var $=0,J=m.length;$<J;$++)V[$]=$%2?y(m[$-1],m[$],d).y:y(m[$],m[$+1],d).x;return V}function Q(e,t,n,r,i,s,o,u,a){var f=1-a;return{x:d(f,3)*e+d(f,2)*3*a*n+f*3*a*a*i+d(a,3)*o,y:d(f,3)*t+d(f,2)*3*a*r+f*3*a*a*s+d(a,3)*u}}function G(e,t,n,r,i,s,o,u){var a=[],f=[[],[]],c,d,m,g,y,b,w,E;for(var S=0;S<2;++S){if(S==0){d=6*e-12*n+6*i;c=-3*e+9*n-9*i+3*o;m=3*n-3*e}else{d=6*t-12*r+6*s;c=-3*t+9*r-9*s+3*u;m=3*r-3*t}if(v(c)<1e-12){if(v(d)<1e-12)continue;g=-m/d;0<g&&g<1&&a.push(g);continue}w=d*d-4*m*c;E=l.sqrt(w);if(w<0)continue;y=(-d+E)/(2*c);0<y&&y<1&&a.push(y);b=(-d-E)/(2*c);0<b&&b<1&&a.push(b)}var x,T,N=a.length,C=N,k;while(N--){g=a[N];k=1-g;f[0][N]=k*k*k*e+3*k*k*g*n+3*k*g*g*i+g*g*g*o;f[1][N]=k*k*k*t+3*k*k*g*r+3*k*g*g*s+g*g*g*u}f[0][C]=e;f[1][C]=t;f[0][C+1]=o;f[1][C+1]=u;f[0].length=f[1].length=C+2;return{min:{x:h.apply(0,f[0]),y:h.apply(0,f[1])},max:{x:p.apply(0,f[0]),y:p.apply(0,f[1])}}}function Y(e,t){var n=!t&&m(e);if(!t&&n.curve)return b(n.curve);var r=V(e),i=t&&V(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null);switch(e[0]){case"M":t.X=e[1];t.Y=e[2];break;case"A":e=["C"].concat(K.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":if(n=="C"||n=="S"){r=t.x*2-t.bx;i=t.y*2-t.by}else{r=t.x;i=t.y}e=["C",r,i].concat(e.slice(1));break;case"T":if(n=="Q"||n=="T"){t.qx=t.x*2-t.qx;t.qy=t.y*2-t.qy}else{t.qx=t.x;t.qy=t.y}e=["C"].concat(J(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1];t.qy=e[2];e=["C"].concat(J(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat($(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat($(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat($(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat($(t.x,t.y,t.X,t.Y))}return e},a=function(e,t){if(e[t].length>7){e[t].shift();var n=e[t];while(n.length){c[t]="A";i&&(h[t]="A");e.splice(t++,0,["C"].concat(n.splice(0,6)))}e.splice(t,1);y=p(r.length,i&&i.length||0)}},l=function(e,t,n,s,o){if(e&&t&&e[o][0]=="M"&&t[o][0]!="M"){t.splice(o,0,["M",s.x,s.y]);n.bx=0;n.by=0;n.x=e[o][1];n.y=e[o][2];y=p(r.length,i&&i.length||0)}},c=[],h=[],d="",v="";for(var g=0,y=p(r.length,i&&i.length||0);g<y;g++){r[g]&&(d=r[g][0]);if(d!="C"){c[g]=d;g&&(v=c[g-1])}r[g]=u(r[g],s,v);c[g]!="A"&&d=="C"&&(c[g]="C");a(r,g);if(i){i[g]&&(d=i[g][0]);if(d!="C"){h[g]=d;g&&(v=h[g-1])}i[g]=u(i[g],o,v);h[g]!="A"&&d=="C"&&(h[g]="C");a(i,g)}l(r,i,s,o,g);l(i,r,o,s,g);var w=r[g],E=i&&i[g],S=w.length,x=i&&E.length;s.x=w[S-2];s.y=w[S-1];s.bx=f(w[S-4])||s.x;s.by=f(w[S-3])||s.y;o.bx=i&&(f(E[x-4])||o.x);o.by=i&&(f(E[x-3])||o.y);o.x=i&&E[x-2];o.y=i&&E[x-1]}i||(n.curve=b(r));return i?[r,i]:r}function Z(e,t){if(!t)return e;var n,r,i,s,o,u,a;e=Y(e);for(i=0,o=e.length;i<o;i++){a=e[i];for(s=1,u=a.length;s<u;s+=2){n=t.x(a[s],a[s+1]);r=t.y(a[s],a[s+1]);a[s]=n;a[s+1]=r}}return e}function et(e,t){var n=[];for(var r=0,i=e.length;i-2*!t>r;r+=2){var s=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];if(t){if(!r)s[0]={x:+e[i-2],y:+e[i-1]};else if(i-4==r)s[3]={x:+e[0],y:+e[1]};else if(i-2==r){s[2]={x:+e[0],y:+e[1]};s[3]={x:+e[2],y:+e[3]}}}else i-4==r?s[3]=s[2]:r||(s[0]={x:+e[r],y:+e[r+1]});n.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return n}var i=t.prototype,s=e.is,o=e._.clone,u="hasOwnProperty",a=/,?([a-z]),?/gi,f=parseFloat,l=Math,c=l.PI,h=l.min,p=l.max,d=l.pow,v=l.abs,S=E(1),x=E(),T=E(0,1),z=e._unit2px,W={path:function(e){return e.attr("path")},circle:function(e){var t=z(e);return U(t.cx,t.cy,t.r)},ellipse:function(e){var t=z(e);return U(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=z(e);return R(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=z(e);return R(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return R(t.x,t.y,t.width,t.height)}};e.path=m;e.path.getTotalLength=S;e.path.getPointAtLength=x;e.path.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return T(e,t).end;var r=T(e,n,1);return t?T(r,t).end:r};i.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};i.getPointAtLength=function(e){return x(this.attr("d"),e)};i.getSubpath=function(t,n){return e.path.getSubpath(this.attr("d"),t,n)};e._.box=g;e.path.findDotsAtSegment=N;e.path.bezierBBox=C;e.path.isPointInsideBBox=k;e.closest=function(t,n,r,i){var s=100,o=g(t-s/2,n-s/2,s,s),u=[],a=r[0].hasOwnProperty("x")?function(e){return{x:r[e].x,y:r[e].y}}:function(e){return{x:r[e],y:i[e]}},f=0;while(s<=1e6&&!f){for(var l=0,c=r.length;l<c;l++){var h=a(l);if(k(o,h.x,h.y)){f++;u.push(h);break}}if(!f){s*=2;o=g(t-s/2,n-s/2,s,s)}}if(s==1e6)return;var p=Infinity,d;for(l=0,c=u.length;l<c;l++){var v=e.len(t,n,u[l].x,u[l].y);if(p>v){p=v;u[l].len=v;d=u[l]}}return d};e.path.isBBoxIntersect=L;e.path.intersection=B;e.path.intersectionNumber=j;e.path.isPointInside=I;e.path.getBBox=q;e.path.get=W;e.path.toRelative=X;e.path.toAbsolute=V;e.path.toCubic=Y;e.path.map=Z;e.path.toString=y;e.path.clone=b});