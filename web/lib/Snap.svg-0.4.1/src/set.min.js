// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.
// 
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
// 
// http://www.apache.org/licenses/LICENSE-2.0
// 
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
Snap.plugin(function(e,t,n,r){var i=Math.max,s=Math.min,o=function(e){this.items=[];this.bindings={};this.length=0;this.type="set";if(e)for(var t=0,n=e.length;t<n;t++)if(e[t]){this[this.items.length]=this.items[this.items.length]=e[t];this.length++}},u=o.prototype;u.push=function(){var e,t;for(var n=0,r=arguments.length;n<r;n++){e=arguments[n];if(e){t=this.items.length;this[t]=this.items[t]=e;this.length++}}return this};u.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};u.forEach=function(e,t){for(var n=0,r=this.items.length;n<r;n++)if(e.call(t,this.items[n],n)===!1)return this;return this};u.animate=function(t,n,r,i){if(typeof r=="function"&&!r.length){i=r;r=mina.linear}if(t instanceof e._.Animation){i=t.callback;r=t.easing;n=r.dur;t=t.attr}var s=arguments;if(e.is(t,"array")&&e.is(s[s.length-1],"array"))var o=!0;var u,a=function(){u?this.b=u:u=this.b},f=0,l=this,c=i&&function(){++f==l.length&&i.call(this)};return this.forEach(function(e,i){eve.once("snap.animcreated."+e.id,a);o?s[i]&&e.animate.apply(e,s[i]):e.animate(t,n,r,c)})};u.remove=function(){while(this.length)this.pop().remove();return this};u.bind=function(e,t,n){var r={};if(typeof t=="function")this.bindings[e]=t;else{var i=n||e;this.bindings[e]=function(e){r[i]=e;t.attr(r)}}return this};u.attr=function(e){var t={};for(var n in e)this.bindings[n]?this.bindings[n](e[n]):t[n]=e[n];for(var r=0,i=this.items.length;r<i;r++)this.items[r].attr(t);return this};u.clear=function(){while(this.length)this.pop()};u.splice=function(e,t,n){e=e<0?i(this.length+e,0):e;t=i(0,s(this.length-e,t));var r=[],u=[],a=[],f;for(f=2;f<arguments.length;f++)a.push(arguments[f]);for(f=0;f<t;f++)u.push(this[e+f]);for(;f<this.length-e;f++)r.push(this[e+f]);var l=a.length;for(f=0;f<l+r.length;f++)this.items[e+f]=this[e+f]=f<l?a[f]:r[f-l];f=this.items.length=this.length-=t-l;while(this[f])delete this[f++];return new o(u)};u.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e){this.splice(t,1);return!0}return!1};u.insertAfter=function(e){var t=this.items.length;while(t--)this.items[t].insertAfter(e);return this};u.getBBox=function(){var e=[],t=[],n=[],r=[];for(var o=this.items.length;o--;)if(!this.items[o].removed){var u=this.items[o].getBBox();e.push(u.x);t.push(u.y);n.push(u.x+u.width);r.push(u.y+u.height)}e=s.apply(0,e);t=s.apply(0,t);n=i.apply(0,n);r=i.apply(0,r);return{x:e,y:t,x2:n,y2:r,width:n-e,height:r-t,cx:e+(n-e)/2,cy:t+(r-t)/2}};u.clone=function(e){e=new o;for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e};u.toString=function(){return"Snapâ€˜s set"};u.type="set";e.Set=o;e.set=function(){var e=new o;arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0));return e}});